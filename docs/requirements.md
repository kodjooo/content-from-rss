
AI News Auto Writer MVP — Техническая документация

========================================================
1. ОБЩЕЕ ОПИСАНИЕ
========================================================
Система автоматически дважды в день (07:00 и 19:00 по Москве)
собирает англоязычные новости из RSS-источников по тематике AI,
оценивает их релевантность, генерирует готовые посты
(1500–3000 символов, 3–4 хэштега), подбирает или создаёт
иллюстрации, загружает их на FreeImageHost и сохраняет всё
в Google Sheets для ручной публикации.

Публикация вручную, без автопостинга.

========================================================
2. ИСТОЧНИКИ ДАННЫХ
========================================================
RSS-источники (англоязычные):
- TechCrunch (AI)
- VentureBeat (AI)
- MIT Technology Review (AI)
- The Verge (AI)
- OpenAI Blog
- Google AI Blog
- Anthropic Blog

Фильтрация по ключевым словам:
AI, Artificial Intelligence, Automation, Neural, ChatGPT, LLM, Anthropic, OpenAI

========================================================
3. АРХИТЕКТУРА ПРОЦЕССА
========================================================
1) Скрипт запускается в 07:00 и 19:00 (по МСК) через pytz.
2) Парсит RSS-источники с помощью feedparser.
3) Фильтрует дубликаты (по URL, title, схожести).
4) Передаёт описание новости в GPT-ассистент для оценки (1–10)
   и кэширует результат.
5) Отбирает минимум три новости, предпочитая оценку 10 → 9 → 8 (до 5 штук за цикл).
6) Для каждой новости формирует short (≤ 600), average (≤ 1000 символов без пробелов) и long (~1000–1500) версии поста
   на русском языке с 3–4 кириллическими хэштегами, повторно обращаясь к API при сбоях.
7) Проводит подбор изображения:
   - Берёт из RSS (enclosure/media).
   - Если нет — ищет по хэштегам/ключевым словам в Pexels API.
   - Если нет — создаёт image prompt через GPT и генерирует изображение
     через images.generate (OpenAI API).
   - Загружает результат на FreeImageHost, получает финальный URL и помечает источник.
8) Перед утренним запуском таблица очищается; данные записываются в Google Sheets строкой без дубликатов по ссылке.

========================================================
4. GOOGLE SHEETS СТРУКТУРА
========================================================
| Date | Source | Title | Link | Summary | Short Post | Long Post | Image URL | Image Source | Score | Status | Notes |

Status: Written (по умолчанию для score ≤ 8) / Revised (проставляется автоматически для score 9–10) / Published (после ручной публикации)

========================================================
5. РАСПИСАНИЕ
========================================================
Используется pytz и datetime для автоматического запуска.
Два таймслота:
- 07:00 Europe/Moscow
- 19:00 Europe/Moscow

========================================================
6. ТЕХНОЛОГИЧЕСКИЙ СТЕК
========================================================
Язык: Python 3.11+
Библиотеки:
- feedparser (RSS парсинг)
- requests (API-запросы)
- gspread (Google Sheets API)
- pytz (часы и расписание)
- python-dotenv (переменные окружения)
- openai (GPT и изображения)

Файл конфигурации .env:
SHEET_ID=
PEXELS_API_KEY=
FREEIMAGEHOST_API_KEY=
OPENAI_API_KEY=

========================================================
7. ЛОГИКА РАБОТЫ
========================================================
1. Проверка RSS → фильтрация → оценка релевантности.
2. Генерация short, average и long версий через GPT (short ≤ 600, average ≤ 1000 символов без пробелов, long ≈1000–1500, 3–4 кириллических хэштега).
3. Подбор изображения (RSS → Pexels → GPT Image).
4. Загрузка на FreeImageHost.
5. Сохранение строки в Google Sheets.
6. Присвоение статуса (`Revised` для score 9–10, иначе `Written`).

========================================================
8. РУЧНАЯ ЧАСТЬ
========================================================
Пользователь:
- Проверяет текст и изображение.
- При необходимости редактирует.
- Публикует пост вручную.
- Меняет статус строки в таблице на Published.

========================================================
9. НЕ ВКЛЮЧЕНО В MVP
========================================================
- Автоматическая публикация в соцсетях.
- Аналитика и метрики.
- A/B-тесты.
- Брендинг изображений.
- Автоматический трекинг показателей.

========================================================
10. ЗАПУСК ПРОЕКТА
========================================================
1) Создать .env с API-ключами.
2) Все должно работать на основании Docker
3) Установить зависимости:
   pip install feedparser requests gspread python-dotenv pytz openai
4) Настроить доступ Google Sheets (OAuth).
5) Запустить main.py — он будет работать в фоне и запускаться по таймслотам.
6) Проверить результат в таблице.

========================================================
11. РЕЗУЛЬТАТ
========================================================
После запуска в таблице появляются новые строки со статусом Written.
Каждая строка содержит:
- заголовок и ссылку на оригинал;
- краткое описание (summary);
- короткую версию поста (short post);
- среднюю версию поста (average post) с завершающей строкой «Источник >»;
- длинную версию поста (long post) с выделениями и ссылкой `[Источник](url)`;
- ссылку на изображение и пометку источника (RSS / библиотека / генерация);
- оценку релевантности (Score);
- статус Written.

После ручной публикации статус меняется на Published.

========================================================
12. ЦЕЛЬ MVP
========================================================
Минимально жизнеспособный продукт, позволяющий тестировать поток:
новость → фильтрация → генерация поста → подбор изображения →
сохранение → публикация вручную.
